webpackJsonp([4],{JkKV:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("Gu7T"),i=s.n(e),n=s("ouP4"),o=s("t5DY"),r={name:"friend-notice",components:{ChatHeader:n.a},data:function(){return{defaultAvatar:"https://wwcdn.weixin.qq.com/node/wework/images/kf_head_image_url_4.png",currentRoom:{type:0,name:"好友通知"},loading:!1,finished:!1,messages:[],pagination:{current:1,pageSize:10,total:0,loadLastId:0}}},methods:{loadHistory:function(){var t=this;this.$toast.loading({message:"加载中...",duration:0}),Object(o.d)({size:this.pagination.pageSize,last_id:this.pagination.loadLastId}).then(function(a){var s,e=a.data.length;if(e<1)return t.finished=!0,void(t.loading=!1);var n=document.getElementById("messageList"),o=n.scrollHeight;t.pagination.loadLastId=a.data[e-1].id||0,a.data.map(function(t){t._remark=""}),(s=t.messages).push.apply(s,i()(a.data.reverse())),t.$nextTick(function(){1===t.pagination.current?t.scrollToBottom():n.scrollTop=n.scrollHeight-o,t.pagination.current++,setTimeout(function(){t.loading=!1},3e3)})}).catch(function(){t.loading=!1,t.finished=!0}).finally(function(){return t.$toast.clear()})},handleApply:function(t,a){var s=this;Object(o.g)({uuid:t.uuid,status:a,remark:t._remark}).then(function(e){t.status=a,s.$toast.success(e.msg)})},scrollToBottom:function(){this.$nextTick(function(){var t=document.getElementById("messageList");t.scrollTop=t.scrollHeight})}}},l={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("chat-header",{attrs:{"room-data":t.currentRoom,"show-more-btn":!1}}),t._v(" "),s("div",{staticClass:"message-list",attrs:{id:"messageList"}},[s("van-list",{attrs:{id:"messageListScroll",finished:t.finished,"finished-text":"没有更多了",offset:80,direction:"up"},on:{load:t.loadHistory},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.messages,function(a,e){return s("div",{key:e,staticClass:"message-box"},[s("div",{staticClass:"header"},[s("div",{staticClass:"left"},[s("div",{staticClass:"user-info"},[s("img",{staticClass:"avatar",attrs:{src:a.avatar||t.defaultAvatar}}),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(a.name||"--")+" ")])])]),t._v(" "),s("div",{staticClass:"right"},[s("span",{staticStyle:{color:"rgba(0, 0, 0, 0.45)"}},[t._v("申请添加好友")])])]),t._v(" "),s("div",{staticClass:"content"},[s("div",[s("label",[t._v("对方留言：")]),t._v(" "),s("span",[t._v("\n                        "+t._s(a.content)+"\n                    ")])])]),t._v(" "),0==a.status?[s("div",{staticClass:"content"},[s("div",[s("label",[t._v("设置备注：")]),t._v(" "),s("span",[s("van-field",{attrs:{placeholder:"请输入备注（可选）",maxlength:12,"show-word-limit":""},model:{value:a._remark,callback:function(s){t.$set(a,"_remark",s)},expression:"item._remark"}})],1)])]),t._v(" "),s("div",{staticClass:"footer"},[s("van-button",{staticStyle:{width:"calc(50% - 12px)"},attrs:{size:"small",type:"default"},on:{click:function(s){return t.handleApply(a,2)}}},[t._v("拒绝\n                        ")]),t._v(" "),s("van-button",{staticStyle:{width:"calc(50% - 12px)"},attrs:{size:"small",type:"info"},on:{click:function(s){return t.handleApply(a,1)}}},[t._v("同意\n                        ")])],1)]:1==a.status?[s("div",{staticClass:"status"},[s("van-tag",{attrs:{type:"primary",size:"large"}},[t._v("已同意")])],1)]:2==a.status?[s("div",{staticClass:"status"},[s("van-tag",{attrs:{type:"primary",size:"large",color:"#ec6969"}},[t._v("已拒绝")])],1)]:[s("div",{staticClass:"status"},[s("van-tag",{attrs:{type:"primary",size:"large",color:"rgba(0,0,0,.25)"}},[t._v("已过期")])],1)]],2)}),0),t._v(" "),t.messages.length<1?s("van-empty",{attrs:{description:"暂无消息"}}):t._e()],1)],1)},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(t){s("T5Bf")},"data-v-2e983ad5",null);a.default=c.exports},T5Bf:function(t,a){}});
//# sourceMappingURL=4.3390ba42f9e70eba28df.js.map