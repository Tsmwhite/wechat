webpackJsonp([4],{Dcbk:function(t,a){},JkKV:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Gu7T"),i=e.n(s),n=e("ouP4"),r=e("t5DY"),o=e("l+E2"),l={name:"friend-notice",components:{ChatHeader:n.a},data:function(){return{renderAvatar:o.renderAvatar,defaultAvatar:"https://wwcdn.weixin.qq.com/node/wework/images/kf_head_image_url_4.png",currentRoom:{type:0,name:"好友通知"},loading:!1,finished:!1,messages:[],pagination:{current:1,pageSize:10,total:0,loadLastId:0}}},methods:{loadHistory:function(){var t=this;this.$toast.loading({message:"加载中...",duration:0}),Object(r.d)({size:this.pagination.pageSize,last_id:this.pagination.loadLastId}).then(function(a){var e,s=a.data.length;if(s<1)return t.finished=!0,void(t.loading=!1);var n=document.getElementById("messageList"),r=n.scrollHeight;t.pagination.loadLastId=a.data[s-1].id||0,a.data.map(function(t){t._remark=""}),(e=t.messages).push.apply(e,i()(a.data.reverse())),t.$nextTick(function(){1===t.pagination.current?t.scrollToBottom():n.scrollTop=n.scrollHeight-r,t.pagination.current++,setTimeout(function(){t.loading=!1},3e3)})}).catch(function(){t.loading=!1,t.finished=!0}).finally(function(){return t.$toast.clear()})},handleApply:function(t,a){var e=this;Object(r.g)({uuid:t.uuid,status:a,remark:t._remark}).then(function(s){t.status=a,e.$toast.success(s.msg)})},scrollToBottom:function(){this.$nextTick(function(){var t=document.getElementById("messageList");t.scrollTop=t.scrollHeight})}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("chat-header",{attrs:{"room-data":t.currentRoom,"show-more-btn":!1}}),t._v(" "),e("div",{staticClass:"message-list",attrs:{id:"messageList"}},[e("van-list",{attrs:{id:"messageListScroll",finished:t.finished,"finished-text":"没有更多了",offset:80,direction:"up"},on:{load:t.loadHistory},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.messages,function(a,s){return e("div",{key:s,staticClass:"message-box"},[e("div",{staticClass:"header"},[e("div",{staticClass:"left"},[e("div",{staticClass:"user-info"},[e("img",{staticClass:"avatar",attrs:{src:a.avatar||t.defaultAvatar}}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(a.name||"--")+" ")])])]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticStyle:{color:"rgba(0, 0, 0, 0.45)"}},[t._v("申请添加好友")])])]),t._v(" "),e("div",{staticClass:"content"},[e("div",[e("label",[t._v("对方留言：")]),t._v(" "),e("span",[t._v("\n                        "+t._s(a.content)+"\n                    ")])])]),t._v(" "),0==a.status?[e("div",{staticClass:"content"},[e("div",[e("label",[t._v("设置备注：")]),t._v(" "),e("span",[e("van-field",{attrs:{placeholder:"请输入备注（可选）",maxlength:12,"show-word-limit":""},model:{value:a._remark,callback:function(e){t.$set(a,"_remark",e)},expression:"item._remark"}})],1)])]),t._v(" "),e("div",{staticClass:"footer"},[e("van-button",{staticStyle:{width:"calc(50% - 12px)"},attrs:{size:"small",type:"default"},on:{click:function(e){return t.handleApply(a,2)}}},[t._v("拒绝\n                        ")]),t._v(" "),e("van-button",{staticStyle:{width:"calc(50% - 12px)"},attrs:{size:"small",type:"info"},on:{click:function(e){return t.handleApply(a,1)}}},[t._v("同意\n                        ")])],1)]:1==a.status?[e("div",{staticClass:"status"},[e("van-tag",{attrs:{type:"primary",size:"large"}},[t._v("已同意")])],1)]:2==a.status?[e("div",{staticClass:"status"},[e("van-tag",{attrs:{type:"primary",size:"large",color:"#ec6969"}},[t._v("已拒绝")])],1)]:[e("div",{staticClass:"status"},[e("van-tag",{attrs:{type:"primary",size:"large",color:"rgba(0,0,0,.25)"}},[t._v("已过期")])],1)]],2)}),0),t._v(" "),t.messages.length<1?e("van-empty",{attrs:{description:"暂无消息"}}):t._e()],1)],1)},staticRenderFns:[]};var d=e("VU/8")(l,c,!1,function(t){e("Dcbk")},"data-v-5e1d4f13",null);a.default=d.exports}});
//# sourceMappingURL=4.86d0a79b3510cebd65dd.js.map